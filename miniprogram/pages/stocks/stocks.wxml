<view class="container">
  <!-- å¸‚åœºåˆ‡æ¢ -->
  <view class="market-tabs">
    <view class="tab {{selectedMarket === 'a' ? 'active' : ''}}" bindtap="switchMarket" data-market="a">
      Aè‚¡
    </view>
    <view class="tab {{selectedMarket === 'hk' ? 'active' : ''}}" bindtap="switchMarket" data-market="hk">
      æ¸¯è‚¡
    </view>
  </view>

  <!-- ç­›é€‰æŒ‰é’® -->
  <view class="filter-bar">
    <view class="filter-btn" bindtap="toggleFilters">
      <text class="icon">ğŸ”</text>
      <text>ç­›é€‰</text>
    </view>
  </view>

  <!-- ç­›é€‰æ¡ä»¶é¢æ¿ -->
  <view class="filters-panel {{showFilters ? 'show' : ''}}">
    <view class="filter-row">
      <text class="filter-label">ä»·æ ¼åŒºé—´:</text>
      <input class="filter-input" placeholder="æœ€ä½ä»·" type="digit" bindinput="onFilterInput" data-field="minPrice" value="{{filters.minPrice}}" />
      <text class="separator">-</text>
      <input class="filter-input" placeholder="æœ€é«˜ä»·" type="digit" bindinput="onFilterInput" data-field="maxPrice" value="{{filters.maxPrice}}" />
    </view>
    
    <view class="filter-row">
      <text class="filter-label">PEåŒºé—´:</text>
      <input class="filter-input" placeholder="æœ€å°PE" type="digit" bindinput="onFilterInput" data-field="minPE" value="{{filters.minPE}}" />
      <text class="separator">-</text>
      <input class="filter-input" placeholder="æœ€å¤§PE" type="digit" bindinput="onFilterInput" data-field="maxPE" value="{{filters.maxPE}}" />
    </view>
    
    <view class="filter-row">
      <text class="filter-label">æœ€å°ROE:</text>
      <input class="filter-input" placeholder="ROE%" type="digit" bindinput="onFilterInput" data-field="minROE" value="{{filters.minROE}}" />
    </view>
    
    <view class="filter-actions">
      <button class="btn btn-secondary btn-small" bindtap="clearFilters">æ¸…ç©º</button>
      <button class="btn btn-primary btn-small" bindtap="applyFilters">åº”ç”¨</button>
    </view>
  </view>

  <!-- è‚¡ç¥¨åˆ—è¡¨ -->
  <view class="stock-list">
    <view wx:if="{{loading}}" class="loading">
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <view wx:elif="{{stockList.length === 0}}" class="empty">
      <view class="empty-icon">ğŸ“Š</view>
      <text>æš‚æ— æ•°æ®</text>
    </view>
    
    <view wx:else>
      <view class="stock-item" wx:for="{{stockList}}" wx:key="code" bindtap="viewStockDetail" data-stock="{{item}}">
        <view class="stock-info">
          <view class="stock-name">{{item.name}}</view>
          <view class="stock-code">{{item.code}}</view>
          <view class="stock-tags">
            <text class="tag tag-info" wx:if="{{item.industry}}">{{item.industry}}</text>
            <text class="score {{getScoreClass(item.score)}}">{{item.score}}åˆ†</text>
          </view>
        </view>
        
        <view class="stock-price">
          <view class="price {{item.change >= 0 ? 'text-red' : 'text-green'}}">
            Â¥{{item.price}}
          </view>
          <view class="change {{item.change >= 0 ? 'text-red' : 'text-green'}}">
            {{item.change >= 0 ? '+' : ''}}{{item.change}}%
          </view>
          <view class="recommendation {{getRecommendationClass(item.recommendation)}}">
            {{item.recommendation}}
          </view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- åˆ·æ–°æç¤º -->
  <view wx:if="{{refreshing}}" class="refresh-indicator">
    <text>åˆ·æ–°ä¸­...</text>
  </view>
</view>
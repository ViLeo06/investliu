<!--æŠ•èµ„é‡‘å¥å¡ç‰‡ç»„ä»¶-->
<view class="quote-card {{cardStyle}} {{clicking ? 'clicking' : ''}}" 
      style="background: {{gradients[quote.category] || gradients.masters}}"
      bindtap="onCardTap">
  
  <!-- å¡ç‰‡å¤´éƒ¨ -->
  <view class="card-header">
    <view class="category-info">
      <text class="category-icon">{{getCategoryIcon(quote.category)}}</text>
      <text class="category-name">{{getCategoryName(quote.category)}}</text>
    </view>
    
    <!-- åˆ†äº«æŒ‰é’® -->
    <view wx:if="{{showShare}}" class="share-btn" bindtap="onShareQuote" catchtap="true">
      <text class="iconfont icon-share">ğŸ“¤</text>
    </view>
  </view>

  <!-- é‡‘å¥å†…å®¹ -->
  <view class="quote-content">
    <text class="quote-text">{{quote.content}}</text>
  </view>

  <!-- ä½œè€…ä¿¡æ¯ -->
  <view class="quote-author">
    <text class="author-name">â€” {{quote.author}}</text>
    <view class="quote-meta">
      <text class="source-page">ç¬¬{{quote.source_page}}é¡µ</text>
    </view>
  </view>

  <!-- æ ‡ç­¾ -->
  <view wx:if="{{cardStyle === 'detailed'}}" class="quote-tags">
    <view wx:for="{{quote.tags}}" wx:key="*this" class="tag">
      {{item}}
    </view>
  </view>

  <!-- è£…é¥°æ€§å…ƒç´  -->
  <view class="decoration">
    <view class="decoration-circle circle-1"></view>
    <view class="decoration-circle circle-2"></view>
    <view class="decoration-line"></view>
  </view>
</view>

<!-- åˆ†äº«æ¨¡æ€æ¡† -->
<view wx:if="{{showShareModal}}" class="share-modal">
  <view class="share-modal-bg" bindtap="closeShareModal"></view>
  <view class="share-modal-content">
    <!-- éšè—çš„Canvasï¼Œç”¨äºç”Ÿæˆåˆ†äº«å›¾ç‰‡ -->
    <canvas 
      id="shareCanvas" 
      type="2d" 
      style="width: 375px; height: 500px; position: absolute; left: -9999px; top: -9999px;">
    </canvas>
    
    <view class="share-loading">
      <text class="loading-text">æ­£åœ¨ç”Ÿæˆåˆ†äº«å›¾ç‰‡...</text>
    </view>
  </view>
</view>